
(function(){var a,b,c={};typeof module!="undefined"&&module.exports?(a=require("amanda")("json"),b=require("underscore"),module.exports=c):typeof define!="undefined"?define(["amanda","underscore"],function(d,e){return a=d("json"),b=e,c}):(a=amanda("json"),b=_,this.ruleValidator=c);var d={};d.prototype={schema:function(){var a={};return b.each(arguments,function(b){for(var c in b)if(b.hasOwnProperty(c)){a[c]=b[c];break}}),a},validate:function(b,c,d){a.validate(c,this[b],{singleError:!1},d)}},c.extend=function(a,c){function f(a){for(var c in this)if(this.hasOwnProperty(c)){var d={};return d[c]=b.clone(this),d[c].required=a===undefined||a===null?!0:a,d}}function g(){return f.call(this,!1)}var e=b.extend(b.clone(d.prototype),c);if(e.attributes)for(var h in e.attributes){var i={};i[h]=e.attributes[h],i.isRequired=f,i.isNotRequired=g,e.attributes[h]=i}for(var j in a){var k=a[j];b.isFunction(k)&&(k=k.call(e,e.attributes)),e[j]={type:"object",properties:k},e[j].ruleName=j,e[j].validate=function(a,b){e.validate(this.ruleName,a,b)}}return e}})()