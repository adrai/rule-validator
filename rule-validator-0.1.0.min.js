
(function(){var a,b,c={};typeof module!="undefined"&&module.exports?(a=require("amanda")("json"),b=require("underscore"),module.exports=c):typeof define!="undefined"?define(["amanda","underscore"],function(d,e){return a=d("json"),b=e,c}):(a=amanda("json"),b=_,this.ruleValidator=c);var d={};d.prototype={schema:function(){var a={};return b.each(arguments,function(b){for(var c in b)if(b.hasOwnProperty(c)){a[c]=b[c];break}}),a},validate:function(b,c,d){a.validate(c,this[b],{singleError:!1},d)}},c.extend=function(a,c){var e=b.extend(b.clone(d.prototype),c);if(e.attributes)for(var f in e.attributes){var g={};g[f]=e.attributes[f],g.isRequired=function(){for(var a in this)if(this.hasOwnProperty(a))return this[a].required=!0,this},g.isNotRequired=function(){for(var a in this)if(this.hasOwnProperty(a))return this[a].required=!1,this},e.attributes[f]=g}for(var h in a){var i=a[h];b.isFunction(i)&&(i=i.call(e,e.attributes)),e[h]={type:"object",properties:i},e[h].ruleName=h,e[h].validate=function(a,b){e.validate(this.ruleName,a,b)}}return e}})()