
(function(){var e,t,n={};typeof module!="undefined"&&module.exports?(e=require("tv4"),t=require("lodash"),module.exports=n):typeof define!="undefined"?define(["amanda","underscore"],function(r,i){return e=e,t=i,n}):(e=e,t=_,this.ruleValidator=n);var r={};r.prototype={schema:function(){var e={};return t.each(arguments,function(t){for(var n in t)if(t.hasOwnProperty(n)){e[n]=t[n];break}}),e},validate:function(t,n,r){if(this[t]){var i=e.validateResult(n,this[t]);i.valid?r(null):r(i)}else r(null)}},n.extend=function(e,n){function s(e){for(var n in this)if(this.hasOwnProperty(n)){var r=t.clone(this);return r[n]=t.clone(this[n]),r[n].required=e===undefined||e===null?!0:e,r}}function o(){return s.call(this,!1)}var i=t.extend(t.clone(r.prototype),n);if(i.attributes)for(var u in i.attributes){var a={};a[u]=i.attributes[u],a.isRequired=s,a.isNotRequired=o,i.attributes[u]=a}for(var f in e){var l=e[f];t.isFunction(l)&&(l=l.call(i,i.attributes)),i[f]={type:"object",properties:l},i[f].ruleName=f,i[f].validate=function(e,t){i.validate(this.ruleName,e,t)}}return i}})()